var cta_settings,dwh_packages=function(t){function e(){cta_settings={cta_ismobile:is_mobile,cta_item_container:t(".cta"),cta_container:"cta-container-",el_cta_button_container:".control-wrapper",cta_items:{},cta_links:{promo_calendar:"http://reservations.directwithhotels.com/reservation/showRooms/"},el_cta_hotel_id:'input[name="hotelid"]',el_cta_promo_id:'input[name="promoid"]',el_cta_start_date:'input[name="startdate"]',el_cta_end_date:'input[name="enddate"]',el_cta_arrival_date_input:'input[name="arrival"]',el_cta_departure_date_input:'input[name="departure"]'},a()}function a(){cta_settings.cta_item_container.each(function(){_this=t(this);var e={};e.cta_item_id=_this.attr("cta-item-id"),e.cta_hotel_id=_this.find(cta_settings.el_cta_hotel_id).val(),e.cta_promo_id=_this.find(cta_settings.el_cta_promo_id).val(),e.cta_start_date=_this.find(cta_settings.el_cta_start_date).val(),e.cta_end_date=_this.find(cta_settings.el_cta_end_date).val(),e.cta_next_date_base=new Date(e.cta_start_date.replace(/\-/g,"/")),e.cta_next_date=t.datepicker.formatDate("yy-mm-dd",new Date(e.cta_next_date_base.setDate(e.cta_next_date_base.getDate()+1)));var a={hotel_id:e.cta_hotel_id,promo_id:e.cta_promo_id,start_date:e.cta_start_date,end_date:e.cta_end_date};cta_settings.cta_items[e.cta_item_id]=a;var i=[],n=_this.find(cta_settings.el_cta_button_container);n&&(i[e.cta_item_id]=n.find(".ctapromobutton").attr("onclick"),"undefined"!=typeof i[e.cta_item_id]&&(i[e.cta_item_id]=i[e.cta_item_id].replace(e.cta_start_date,"onclick_date_str"),i[e.cta_item_id]=i[e.cta_item_id].replace(e.cta_next_date,"onclick_nextdate_str")));var c={mindate:new Date(e.cta_start_date.replace(/\-/g,"/")),maxdate:new Date(e.cta_end_date.replace(/\-/g,"/")),mydate:new Date(e.cta_start_date.replace(/\-/g,"/")),nextdate:new Date(e.cta_next_date.replace(/\-/g,"/"))};_(_this,c,e,i)})}function _(e,a,_,n){e.find(cta_settings.el_cta_arrival_date_input).datepicker({dateFormat:"dd M yy",showOn:"both",buttonImageOnly:!1,buttonText:"",onSelect:function(){var a=t(this).datepicker("getDate"),c=a.getTime()+864e5,r=new Date(c);e.find(cta_settings.el_cta_departure_date_input).datepicker("option","minDate",r).datepicker("setDate",jQuery.datepicker.formatDate("dd M yy",new Date(c))),i(e,_,n)},constrainInput:!0,changeMonth:!0,changeYear:!0,showTime:!1,showHour:!1,showMinute:!1,showSecond:!1,minDate:a.mindate,maxDate:a.maxdate}),e.find(cta_settings.el_cta_departure_date_input).datepicker({dateFormat:"dd M yy",showOn:"both",buttonImageOnly:!1,buttonText:"",onSelect:function(){i(e,_,n)},constrainInput:!0,changeMonth:!0,changeYear:!0,showTime:!1,showHour:!1,showMinute:!1,showSecond:!1,minDate:a.nextdate,maxDate:a.maxdate,defaultDate:1})}function i(e,a,_){var i=t('[cta-button-id="'+a.cta_item_id+'"]');arrival=e.find(cta_settings.el_cta_arrival_date_input),departure=e.find(cta_settings.el_cta_departure_date_input);var o=arrival.datepicker("getDate"),s=departure.datepicker("getDate"),l="yy-mm-dd",m={arrival_date:t.datepicker.formatDate(l,new Date(o)),departure_date:t.datepicker.formatDate(l,new Date(s))},p=r(m,a);if(n(i,p,"href"),m&&_&&(0==google_analytics_info.gtm_flag||""==google_analytics_info.gtm_flag)){var u="";u=d("onclick_date_str",m.arrival_date,_[a.cta_item_id]),u=d("onclick_nextdate_str",m.departure_date,u),c(i,u,"onclick")}}function n(t,e,a){t.attr(a,e)}function c(t,e,a){t.attr(a,e)}function r(t,e){var a=cta_link_config.promo.calendar.base_url;return a=a+cta_settings.cta_items[e.cta_item_id].hotel_id+"/"+t.arrival_date+"/"+t.departure_date+"/",a+=cta_link_config.promo.calendar.param1+"/",a+=cta_settings.cta_items[e.cta_item_id].promo_id+"/",a+=cta_link_config.promo.calendar.param2+"/"}function d(t,e,a){var _="";return""!=a&&(_=a.replace(t,e)),_}return t(document).ready(function(){require(["jquery_ui_core","jquery_ui_datepicker"],function(){e()})}),{init:e,cta_settings:cta_settings,bindUIEvents:a,update_onclick_event:d}}(jQuery);